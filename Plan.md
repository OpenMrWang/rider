# é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡

## èƒŒæ™¯

åšä¸»ä»¥ vlog å½¢å¼è®°å½•é•¿æœŸéª‘è¡Œæ—…è¡Œ

è§†é¢‘ä¸­ä¸åŒ…å«å¯ç”¨ GPS è½¨è¿¹

éœ€è¦é€šè¿‡ äººå·¥ + åœ°å›¾å¯¼èˆª + AI è¾…åŠ©æ ¡å‡† æ–¹å¼ï¼Œè¿˜åŸæ¯å¤©çš„éª‘è¡Œè·¯å¾„

æœ€ç»ˆç›®æ ‡æ˜¯ï¼š

å±•ç¤ºæ¯å¤©çš„éª‘è¡Œè·¯çº¿

è®¡ç®—æ¯æ—¥ä¸æ€»æ—…è¡Œé‡Œç¨‹

é€šè¿‡ç½‘é¡µå½¢å¼å¯¹å¤–å…¬å¼€

## æ ¸å¿ƒç›®æ ‡

âœ… è·¯å¾„äº‹å®å¯å¤ç›˜ã€å¯éªŒè¯

âœ… åœ°å›¾å±•ç¤ºå¯æ›¿æ¢ï¼ˆé«˜å¾· / ç™¾åº¦ / OSMï¼‰

âœ… è®¡ç®—ç»“æœä¸ä¾èµ–å•†ä¸šåœ°å›¾

âœ… çº¯å‰ç«¯ã€Serverless

âœ… JSON / GeoJSON ä¸ºå”¯ä¸€äº‹å®æº

# æ€»ä½“è®¾è®¡åŸåˆ™ï¼ˆéå¸¸é‡è¦ï¼‰

## äº‹å®ä¸å±•ç¤ºåˆ†ç¦»ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

åœ°å›¾åªæ˜¯â€œçš®è‚¤â€ï¼ŒGeoJSON æ‰æ˜¯â€œäº‹å®â€

è·¯å¾„äº‹å®ï¼š

ç”±äººå·¥ + AI æ ¡å‡†ç”Ÿæˆ

ä»¥ WGS-84 GeoJSON å­˜å‚¨

åœ°å›¾ SDKï¼š

åªæ¶ˆè´¹ GeoJSON

ä¸å‚ä¸è·ç¦»è®¡ç®—

ä¸å†™å›æ•°æ®

## åæ ‡ç³»ç»Ÿä¸€åŸåˆ™
å±‚çº§	åæ ‡ç³»
æ•°æ®å­˜å‚¨ / è®¡ç®—	WGS-84
é«˜å¾·å±•ç¤º	GCJ-02ï¼ˆç”±å‰ç«¯è½¬æ¢ï¼‰
ç™¾åº¦å±•ç¤º	BD-09ï¼ˆç”±å‰ç«¯è½¬æ¢ï¼‰
OSM / MapLibre	WGS-84

â— ä»»ä½•åæ ‡è½¬æ¢ç»“æœéƒ½ä¸å†™å›äº‹å®å±‚

# æŠ€æœ¯æ ˆ

## å‰ç«¯åŸºç¡€

React 18

TypeScript

Vite

TailwindCSS

## åœ°ç†ä¸è®¡ç®—

GeoJSONï¼ˆè·¯å¾„äº‹å®ï¼‰

Turf.jsï¼ˆè·ç¦»ã€é•¿åº¦è®¡ç®—ï¼‰

OSRM / GraphHopperï¼ˆä»…ç”¨äºè¾…åŠ©è§„åˆ’ï¼Œä¸ä½œä¸ºäº‹å®æºï¼‰

## åœ°å›¾å±•ç¤ºï¼ˆå¯æ’æ‹”ï¼‰

é«˜å¾·åœ°å›¾ JS SDK

ç™¾åº¦åœ°å›¾ JS SDK

MapLibre GL JSï¼ˆOSMï¼‰

# ç³»ç»Ÿæ•´ä½“æ¶æ„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI / View Layer      â”‚
â”‚  React Components      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Map Adapter Layer     â”‚  â† å·¥å‚æ¨¡å¼
â”‚  (Amap / Baidu / OSM)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Core Domain Layer     â”‚
â”‚  GeoJSON / Distance   â”‚
â”‚  Calculation (Turf)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Layer            â”‚
â”‚  JSON / GeoJSON        â”‚
â”‚  Local / Export        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# æ•°æ®è®¾è®¡ï¼ˆJSON Firstï¼‰
## Day çº§æ•°æ®ç»“æ„ï¼ˆæ ¸å¿ƒï¼‰
{
  "day": 12,
  "date": "2023-06-18",
  "vlog": {
    "platform": "bilibili",
    "episode": "EP34",
    "notes": "05:30 å‡ºç° G318 è·¯ç‰Œ"
  },
  "points": [
    { "name": "æ‹‰è¨", "lat": 29.652, "lon": 91.172 },
    { "name": "å½“é›„", "lat": 30.473, "lon": 91.103 },
    { "name": "çº³æœ¨é”™", "lat": 30.719, "lon": 90.989 }
  ],
  "routeGeoJSON": null,
  "distanceKm": null
}

## æ€»æ•°æ®ç»“æ„
type TripData = {
  meta: {
    title: string;
    author: string;
    description: string;
  };
  days: DayRecord[];
};

# æ ¸å¿ƒæ¨¡å—è®¾è®¡ï¼ˆå·¥å‚æ¨¡å¼ï¼‰
## åœ°å›¾é€‚é…å™¨æ¥å£ï¼ˆæŠ½è±¡å±‚ï¼‰
interface MapAdapter {
  init(containerId: string): void;
  setCenter(lat: number, lon: number, zoom: number): void;
  drawRoute(route: GeoJSON.LineString): void;
  drawPoints(points: Point[]): void;
  destroy(): void;
}

## åœ°å›¾å·¥å‚ï¼ˆFactoryï¼‰
class MapFactory {
  static create(type: "amap" | "baidu" | "osm"): MapAdapter {
    switch (type) {
      case "amap":
        return new AMapAdapter();
      case "baidu":
        return new BaiduMapAdapter();
      case "osm":
        return new OSMAdapter();
    }
  }
}


ğŸ‘‰ åç»­æ–°å¢åœ°å›¾ ä¸å½±å“ä¸šåŠ¡å±‚

## è·ç¦»è®¡ç®—ç­–ç•¥

ä½¿ç”¨ Turf.js

è¾“å…¥ï¼šGeoJSON.LineString

è¾“å‡ºï¼š

æ¯æ—¥è·ç¦»ï¼ˆkmï¼‰

æ€»è·ç¦»ï¼ˆç´¯è®¡ï¼‰

length(lineString, { units: "kilometers" });

# å·¥ä½œæµï¼ˆä» vlog åˆ°å±•ç¤ºï¼‰

vlog è§†é¢‘
   â†“
äººå·¥ / AI è¯†åˆ«åœ°ç‚¹
   â†“
å½•å…¥ç‚¹ä½ï¼ˆJSONï¼‰
   â†“
å¯¼èˆªè§„åˆ’ï¼ˆOSRM / GraphHopperï¼‰
   â†“
äººå·¥æ ¡å‡†
   â†“
ç”Ÿæˆ GeoJSON
   â†“
Turf è®¡ç®—é‡Œç¨‹
   â†“
ç½‘é¡µå±•ç¤ºï¼ˆå¤šåœ°å›¾ï¼‰

# éƒ¨ç½²æ–¹å¼ï¼ˆServerlessï¼‰

GitHub Pages / Vercel / Netlify

æ— åç«¯

æ•°æ®ï¼š

æœ¬åœ° JSON

æˆ– Git ä»“åº“ç‰ˆæœ¬åŒ–

# åˆ†é˜¶æ®µå®ç°æ¸…å•ï¼ˆMarkdown å¯æ‰“å‹¾ï¼‰
Phase 0ï¼šé¡¹ç›®åˆå§‹åŒ–

âœ… Vite + React + TS åˆå§‹åŒ–

âœ… TailwindCSS é…ç½®

âœ… åŸºç¡€é¡µé¢ç»“æ„

Phase 1ï¼šæ•°æ®å±‚

âœ… å®šä¹‰ DayRecord / TripData ç±»å‹

âœ… JSON å¯¼å…¥ / å¯¼å‡º

âœ… æœ¬åœ°æ•°æ®ç®¡ç†ï¼ˆstateï¼‰

Phase 2ï¼šåœ°ç†è®¡ç®—

âœ… å¼•å…¥ Turf.js

âœ… æ¯æ—¥è·ç¦»è®¡ç®—

âœ… æ€»é‡Œç¨‹æ±‡æ€»

Phase 3ï¼šåœ°å›¾æŠ½è±¡å±‚

âœ… MapAdapter æ¥å£

âœ… MapFactory å®ç°

âœ… OSM(MapLibre) Adapter

Phase 4ï¼šä¸­å›½åœ°å›¾æ”¯æŒ

âœ… é«˜å¾· MapAdapter

âœ… ç™¾åº¦ MapAdapter

âœ… WGS-84 â†’ GCJ-02 / BD-09 è½¬æ¢

Phase 5ï¼šè·¯å¾„å±•ç¤º

âœ… GeoJSON è·¯çº¿æ¸²æŸ“

âœ… ç‚¹ä½æ¸²æŸ“

âœ… åœ°å›¾åˆ‡æ¢ UI

Phase 6ï¼šæ•°æ®æ ¡å‡†å·¥å…·

âœ… ç‚¹ä½ç¼–è¾‘ UI

âœ… æ‰‹åŠ¨è°ƒæ•´é¡ºåº

âœ… é‡æ–°ç”Ÿæˆè·¯çº¿

Phase 7ï¼šå±•ç¤ºä¸å‘å¸ƒ

âœ… æ€»é‡Œç¨‹ç»Ÿè®¡é¢æ¿

âœ… æ¯æ—¥è·¯çº¿åˆ—è¡¨

âœ… å…¬å…±åªè¯»æ¨¡å¼

# License å»ºè®®

ä»£ç ï¼šMIT / Apache-2.0

è·¯å¾„æ•°æ®ï¼šCC BY-SA 4.0 æˆ– CC0

è¯´æ˜ï¼š

åœ°å›¾åº•å›¾ç‰ˆæƒå½’å„åœ°å›¾æœåŠ¡å•†æ‰€æœ‰ï¼Œä»…ç”¨äºå±•ç¤º